{"version":3,"sources":["index.js"],"names":["RouterConfigBuilder","moment","_","MUniqueView","API_RES","getUVCount","routerConfigBuilder","METHOD_TYPE_GET","req","res","projectId","get","st","parseInt","unix","et","isInteger","send","showError","uvReord","getUVInRange","showResult"],"mappings":"AAAA,OAAOA,mBAAP,MAAgC,mDAAhC;AACA,OAAOC,MAAP,MAAmB,QAAnB;AACA,OAAOC,CAAP,MAAc,QAAd;AACA,OAAOC,WAAP,MAAwB,iCAAxB;AACA,OAAOC,OAAP,MAAoB,yBAApB;AAEA,MAAMC,UAAU,GAAGL,mBAAmB,CAACM,mBAApB,CAAwC,eAAxC,EAAyDN,mBAAmB,CAACO,eAA7E,EAA8F,OAAOC,GAAP,EAAYC,GAAZ,KAAoB;AACnI,QAAMC,SAAS,GAAGR,CAAC,CAACS,GAAF,CAAMH,GAAN,EAAW,CAAC,KAAD,EAAQ,SAAR,EAAmB,WAAnB,CAAX,EAA4C,CAA5C,CAAlB;;AACA,MAAII,EAAE,GAAGC,QAAQ,CAACX,CAAC,CAACS,GAAF,CAAMH,GAAN,EAAW,CAAC,OAAD,EAAU,IAAV,CAAX,EAA4BP,MAAM,GAAGa,IAAT,KAAkB,IAA9C,CAAD,CAAjB;AACA,MAAIC,EAAE,GAAGF,QAAQ,CAACX,CAAC,CAACS,GAAF,CAAMH,GAAN,EAAW,CAAC,OAAD,EAAU,IAAV,CAAX,EAA4BP,MAAM,GAAGa,IAAT,KAAkB,IAA9C,CAAD,CAAjB;;AAEA,MAAIZ,CAAC,CAACc,SAAF,CAAYJ,EAAZ,MAAoB,KAApB,IAA6BV,CAAC,CAACc,SAAF,CAAYD,EAAZ,MAAoB,KAArD,EAA4D;AAC1DN,IAAAA,GAAG,CAACQ,IAAJ,CAASb,OAAO,CAACc,SAAR,CAAkB,WAAlB,CAAT;AACA;AACD;;AACDN,EAAAA,EAAE,GAAGA,EAAE,GAAG,IAAV;AACAG,EAAAA,EAAE,GAAGA,EAAE,GAAG,IAAV;AACA,QAAMI,OAAO,GAAG,MAAMhB,WAAW,CAACiB,YAAZ,CAAyBV,SAAzB,EAAoCE,EAApC,EAAwCG,EAAxC,CAAtB;AACAN,EAAAA,GAAG,CAACQ,IAAJ,CAASb,OAAO,CAACiB,UAAR,CAAmBF,OAAnB,CAAT;AACD,CAbkB,CAAnB;AAeA,eAAe,EACb,GAAGd;AADU,CAAf","sourcesContent":["import RouterConfigBuilder from '~/src/library/utils/modules/router_config_builder'\nimport moment from 'moment'\nimport _ from 'lodash'\nimport MUniqueView from '~/src/model/summary/unique_view'\nimport API_RES from '~/src/constants/api_res'\n\nconst getUVCount = RouterConfigBuilder.routerConfigBuilder('/api/uv/count', RouterConfigBuilder.METHOD_TYPE_GET, async (req, res) => {\n  const projectId = _.get(req, ['fee', 'project', 'projectId'], 1)\n  let st = parseInt(_.get(req, ['query', 'st'], moment().unix() * 1000))\n  let et = parseInt(_.get(req, ['query', 'et'], moment().unix() * 1000))\n\n  if (_.isInteger(st) === false || _.isInteger(et) === false) {\n    res.send(API_RES.showError('st或et格式不对'))\n    return\n  }\n  st = st / 1000\n  et = et / 1000\n  const uvReord = await MUniqueView.getUVInRange(projectId, st, et)\n  res.send(API_RES.showResult(uvReord))\n})\n\nexport default {\n  ...getUVCount\n}\n"],"file":"index.js"}