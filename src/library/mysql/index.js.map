{"version":3,"sources":["index.js"],"names":["Alert","WatchIdList","sqlconfig","knex","Knex","client","connection","host","port","database","user","password","debug","pool","max","min","idleTimeoutMillis","reapIntervalMillis","acquireConnectionTimeout","log","error","message","sendMessage","WATCH_UCID_LIST_DEFAULT"],"mappings":"AAAA,OAAOA,KAAP,MAAkB,mCAAlB;AACA,OAAOC,WAAP,MAAwB,qBAAxB;AACA,OAAOC,SAAP,MAAsB,qBAAtB;AACA,OAAOC,IAAP,MAAiB,MAAjB;AACA;;AAEA,MAAMC,IAAI,GAAGD,IAAI,CAAC;AAChBE,EAAAA,MAAM,EAAE,OADQ;AAEhBC,EAAAA,UAAU,EAAE;AACVC,IAAAA,IAAI,EAAEL,SAAS,CAACK,IADN;AAEVC,IAAAA,IAAI,EAAEN,SAAS,CAACM,IAFN;AAGVC,IAAAA,QAAQ,EAAEP,SAAS,CAACO,QAHV;AAIVC,IAAAA,IAAI,EAAER,SAAS,CAACQ,IAJN;AAKVC,IAAAA,QAAQ,EAAET,SAAS,CAACS;AALV,GAFI;AAShBC,EAAAA,KAAK,EAAE,KATS;AAUhBC,EAAAA,IAAI,EAAE;AACJC,IAAAA,GAAG,EAAE,EADD;AAEJC,IAAAA,GAAG,EAAE,CAFD;AAGJ;AACA;AACA;AACA;AACAC,IAAAA,iBAAiB,EAAE,GAPf;AAQJ;AACAC,IAAAA,kBAAkB,EAAE;AAThB,GAVU;AAqBhBC,EAAAA,wBAAwB,EAAE,KArBV;AAsBhBC,EAAAA,GAAG,EAAE;AACHC,IAAAA,KAAK,CAAEC,OAAF,EAAW;AACdrB,MAAAA,KAAK,CAACsB,WAAN,CAAkBrB,WAAW,CAACsB,uBAA9B,EAAwD,cAAaF,OAAQ,EAA7E;AACD;;AAHE;AAtBW,CAAD,CAAjB;AA6BA,eAAejB,IAAf","sourcesContent":["import Alert from '~/src/library/utils/modules/alert'\nimport WatchIdList from '~/src/configs/alarm'\nimport sqlconfig from '~/src/configs/mysql'\nimport knex from 'knex'\n/**  knex 方式 */\n\nconst Knex = knex({\n  client: 'mysql',\n  connection: {\n    host: sqlconfig.host,\n    port: sqlconfig.port,\n    database: sqlconfig.database,\n    user: sqlconfig.user,\n    password: sqlconfig.password\n  },\n  debug: false,\n  pool: {\n    max: 10,\n    min: 0,\n    // 由于存在资源池, 导致句柄不被释放, 程序不能退出\n    // 因此将最小句柄数设为0, 每100ms检查一次是否有超过120ms未被使用的资源\n    // 以便句柄的及时回收\n    // free resouces are destroyed after this many milliseconds\n    idleTimeoutMillis: 100,\n    // how often to check for idle resources to destroy\n    reapIntervalMillis: 150\n  },\n  acquireConnectionTimeout: 60000,\n  log: {\n    error (message) {\n      Alert.sendMessage(WatchIdList.WATCH_UCID_LIST_DEFAULT, `数据库操作异常 => ${message}`)\n    }\n  }\n})\n\nexport default Knex\n"],"file":"index.js"}